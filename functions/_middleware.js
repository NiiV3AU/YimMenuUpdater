export async function onRequest(context){const response=await context.next();const url=new URL(context.request.url);if(url.pathname!=="/"){return response}const acceptLanguage=context.request.headers.get("accept-language")||"en";const supportedLanguages=["de","fr","nl","zh","es","ja","pt","tr","pl","ru","uk"];const preferredLang=acceptLanguage.split(",").map((lang)=>lang.split(";")[0].toLowerCase().slice(0,2)).find((langCode)=>supportedLanguages.includes(langCode));if(preferredLang){return Response.redirect(new URL(`/${ preferredLang }/`,url),302)}return response}