export async function onRequest(context){const response=await context.next(),url=new URL(context.request.url);if("/"!==url.pathname)return response;const acceptLanguage=context.request.headers.get("accept-language")||"en",supportedLanguages=["de","fr","nl","zh","es","ja","pt","tr","pl","ru","uk"],preferredLang=acceptLanguage.split(",").map(lang=>lang.split(";")[0].toLowerCase().slice(0,2)).find(langCode=>supportedLanguages.includes(langCode));return preferredLang?Response.redirect(new URL(`/${preferredLang}/`,url),302):response}